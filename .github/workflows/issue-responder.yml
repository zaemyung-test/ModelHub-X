name: Issue responder

on:
  issues:
    types: [opened, labeled]

jobs:
  respond:
    runs-on: ubuntu-latest
    steps:
      - name: Respond to new or labeled issues
        uses: actions/github-script@v7
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const issue = context.payload.issue;
            // Collect labels from the issue and from the labeled event if present
            let labels = (issue.labels || []).map(l => l.name);
            if (context.payload.action === 'labeled' && context.payload.label) {
              labels.push(context.payload.label.name);
            }

            let body = 'Hello, world!';
            if (labels.includes('bug')) {
              body = 'Thank you. We will fix it.';
            } else if (labels.includes('feature')) {
              body = 'Thank you, we will consider to include this feature.';
            }

            await github.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issue.number,
              body
            });
