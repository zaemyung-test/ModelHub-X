name: Issue Responder

on:
  issues:
    types: [opened, labeled]

jobs:
  respond:
    runs-on: ubuntu-latest
    steps:
      - name: Comment on issue based on label
        uses: actions/github-script@v6
        with:
          github-token: ${{ secrets.GITHUB_TOKEN }}
          script: |
            const issue = context.payload.issue;
            // If this event is 'labeled' the payload may include label info under context.payload.label
            // collect all labels present on the issue (if any)
            const labels = (issue && issue.labels) ? issue.labels.map(l => l.name.toLowerCase()) : [];
            let comment = "Hello, world!";
            if (labels.includes('bug')) {
              comment = "Thank you. We will fix it.";
            } else if (labels.includes('feature')) {
              comment = "Thank you, we will consider to include this feature.";
            }
            await github.issues.createComment({
              owner: context.repo.owner,
              repo: context.repo.repo,
              issue_number: issue.number,
              body: comment
            });
